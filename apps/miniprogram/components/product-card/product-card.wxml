<!-- components/product-card/product-card.wxml -->
<view class="product-card {{cardType === 'grid' ? 'grid-card' : 'list-card'}}">
  <!-- 图片区域 - 点击进入详情 -->
  <view class="image-container" bindtap="onCardTap">
    <image 
      class="product-image" 
      src="{{safeProduct.images && safeProduct.images[0] ? safeProduct.images[0].url : safeProduct.image || 'https://picsum.photos/400/300?random=' + safeProduct.id}}" 
      mode="aspectFill" 
      lazy-load="true"
    />
    
    <!-- 收藏按钮 -->
    <view 
      class="favorite-btn {{isFavorited ? 'favorited' : ''}}"
      bindtap="onToggleFavorite"
      catchtap
    >
      <text class="favorite-icon">{{isFavorited ? '❤️' : '🤍'}}</text>
    </view>
    
    <!-- 成色标签 -->
    <view class="condition-tag">
      <text class="condition-text">{{conditionLabel}}</text>
    </view>
  </view>

  <!-- 商品信息区域 - 点击跳转详情 -->
  <view class="product-info" bindtap="onCardTap">
    <!-- 商品名称 -->
    <text class="product-name">{{safeProduct.title || safeProduct.name}}</text>
    
    <!-- 商品描述/品牌 -->
    <text class="product-desc">{{safeProduct.brand}}, {{productDesc}}</text>
    
    <!-- 价格或咨询区域 -->
    <view class="price-section">
      <!-- 价格模式 -->
      <view wx:if="{{priceInfo.mode !== 'ask'}}" class="price-row">
        <text class="price-main">£{{safeProduct.rent_monthly_gbp || 8}}/mo</text>
        <text wx:if="{{safeProduct.purchase_price_gbp}}" class="price-old">£{{safeProduct.purchase_price_gbp}}</text>
      </view>
      
      <!-- 咨询模式 -->
      <view wx:else class="consult-container">
        <ask-price-button 
          label="咨询"
          fullWidth="{{false}}"
          size="sm"
          variant="outline"
          data="{{buttonData}}"
          bind:tap="onPriceInquiry"
        />
      </view>
    </view>
    
    <!-- 评分（如果有） -->
    <view wx:if="{{safeProduct.rating}}" class="rating-section">
      <view class="stars">
        <block wx:for="{{5}}" wx:key="*this">
          <text class="star {{index < Math.floor(safeProduct.rating) ? 'filled' : ''}}">★</text>
        </block>
      </view>
      <text class="rating-count">({{safeProduct.reviews || 0}})</text>
    </view>
    
    <!-- 更多选项 -->
    <text class="more-options">+ Options</text>
  </view>

  <!-- 右下角购物车按钮 -->
  <view 
    class="cart-btn"
    bindtap="onAddToCart"
    catchtap
  >
    <text class="cart-icon">🛒</text>
  </view>
</view>