<!-- components/product-card/product-card.wxml -->
<view class="product-card {{cardType === 'grid' ? 'grid-card' : 'list-card'}}">
  <!-- å›¾ç‰‡åŒºåŸŸ - ç‚¹å‡»è¿›å…¥è¯¦æƒ… -->
  <view class="image-container" bindtap="onCardTap">
    <image 
      class="product-image" 
      src="{{safeProduct.images && safeProduct.images[0] ? safeProduct.images[0].url : safeProduct.image || 'https://picsum.photos/400/300?random=' + safeProduct.id}}" 
      mode="aspectFill" 
      lazy-load="true"
    />
    
    <!-- æ”¶è—æŒ‰é’® -->
    <view 
      class="favorite-btn {{isFavorited ? 'favorited' : ''}}"
      bindtap="onToggleFavorite"
      catchtap
    >
      <text class="favorite-icon">{{isFavorited ? 'â¤ï¸' : 'ğŸ¤'}}</text>
    </view>
    
    <!-- æˆè‰²æ ‡ç­¾ -->
    <view class="condition-tag">
      <text class="condition-text">{{conditionLabel}}</text>
    </view>
  </view>

  <!-- å•†å“ä¿¡æ¯åŒºåŸŸ - ç‚¹å‡»è·³è½¬è¯¦æƒ… -->
  <view class="product-info" bindtap="onCardTap">
    <!-- å•†å“åç§° -->
    <text class="product-name">{{safeProduct.title || safeProduct.name}}</text>
    
    <!-- å•†å“æè¿°/å“ç‰Œ -->
    <text class="product-desc">{{safeProduct.brand}}, {{productDesc}}</text>
    
    <!-- ä»·æ ¼æˆ–å’¨è¯¢åŒºåŸŸ -->
    <view class="price-section">
      <!-- ä»·æ ¼æ¨¡å¼ -->
      <view wx:if="{{priceInfo.mode !== 'ask'}}" class="price-row">
        <text class="price-main">Â£{{safeProduct.rent_monthly_gbp || 8}}/mo</text>
        <text wx:if="{{safeProduct.purchase_price_gbp}}" class="price-old">Â£{{safeProduct.purchase_price_gbp}}</text>
      </view>
      
      <!-- å’¨è¯¢æ¨¡å¼ -->
      <view wx:else class="consult-container">
        <ask-price-button 
          label="å’¨è¯¢"
          fullWidth="{{false}}"
          size="sm"
          variant="outline"
          data="{{buttonData}}"
          bind:tap="onPriceInquiry"
        />
      </view>
    </view>
    
    <!-- è¯„åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰ -->
    <view wx:if="{{safeProduct.rating}}" class="rating-section">
      <view class="stars">
        <block wx:for="{{5}}" wx:key="*this">
          <text class="star {{index < Math.floor(safeProduct.rating) ? 'filled' : ''}}">â˜…</text>
        </block>
      </view>
      <text class="rating-count">({{safeProduct.reviews || 0}})</text>
    </view>
    
    <!-- æ›´å¤šé€‰é¡¹ -->
    <text class="more-options">+ Options</text>
  </view>

  <!-- å³ä¸‹è§’è´­ç‰©è½¦æŒ‰é’® -->
  <view 
    class="cart-btn"
    bindtap="onAddToCart"
    catchtap
  >
    <text class="cart-icon">ğŸ›’</text>
  </view>
</view>