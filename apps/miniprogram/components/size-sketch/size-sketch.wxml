<!--components/size-sketch/size-sketch.wxml-->

<!-- 弹窗模式 -->
<view wx:if="{{mode === 'modal' && visible}}" class="size-sketch-overlay" bindtap="onClose">
  <view class="size-sketch-modal" catchtap>
    <!-- 头部 -->
    <view class="sketch-header">
      <text class="sketch-title">尺寸示意图</text>
      <text class="close-btn" bindtap="onClose">✕</text>
    </view>
    
    <!-- 画布内容 -->
    <view class="sketch-content">
      <view class="sketch-canvas-container">
        <canvas 
          id="sketchCanvas" 
          type="2d"
          class="sketch-canvas"
          style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
        ></canvas>
      </view>
      
      <!-- 控制面板 -->
      <view class="sketch-controls">
        <!-- 缩放控制 -->
        <view class="scale-controls">
          <view class="control-btn" data-type="out" bindtap="onScaleChange">
            <text class="control-icon">-</text>
          </view>
          <text class="scale-text">{{scalePercent}}%</text>
          <view class="control-btn" data-type="in" bindtap="onScaleChange">
            <text class="control-icon">+</text>
          </view>
          <view class="control-btn reset-btn" data-type="reset" bindtap="onScaleChange">
            <text class="control-text">重置</text>
          </view>
        </view>
        
        <!-- 旋转控制 -->
        <view class="rotation-controls">
          <view class="control-btn rotate-btn" bindtap="onRotate">
            <text class="control-icon">↻</text>
            <text class="control-text">旋转</text>
          </view>
          <text class="rotation-text">{{rotation}}°</text>
        </view>
      </view>
    </view>
    
    <!-- 提示信息 -->
    <view class="sketch-tips">
      <text class="tip-icon">💡</text>
      <text class="tip-text">请预留 50-100mm 转角/门框空间</text>
    </view>
  </view>
</view>

<!-- 内联模式 -->
<view wx:elif="{{mode === 'inline'}}" class="size-sketch-inline">
  <view class="sketch-canvas-container">
    <canvas 
      id="sketchCanvas" 
      type="2d"
      class="sketch-canvas"
      style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
    ></canvas>
  </view>
  
  <!-- 控制面板 -->
  <view class="sketch-controls">
    <!-- 缩放控制 -->
    <view class="scale-controls">
      <view class="control-btn" data-type="out" bindtap="onScaleChange">
        <text class="control-icon">-</text>
      </view>
      <text class="scale-text">{{scalePercent}}%</text>
      <view class="control-btn" data-type="in" bindtap="onScaleChange">
        <text class="control-icon">+</text>
      </view>
      <view class="control-btn reset-btn" data-type="reset" bindtap="onScaleChange">
        <text class="control-text">重置</text>
      </view>
    </view>
    
    <!-- 旋转控制 -->
    <view class="rotation-controls">
      <view class="control-btn rotate-btn" bindtap="onRotate">
        <text class="control-icon">↻</text>
        <text class="control-text">旋转</text>
      </view>
      <text class="rotation-text">{{rotation}}°</text>
    </view>
  </view>
  
  <!-- 提示信息 -->
  <view class="sketch-tips">
    <text class="tip-icon">💡</text>
    <text class="tip-text">请预留 50-100mm 转角/门框空间</text>
  </view>
</view>