<!--pages/cart/cart.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">è´­ç‰©è½¦</text>
    <text class="cart-count">{{cartItems.length}}ä»¶å•†å“</text>
  </view>

  <!-- è´­ç‰©è½¦å†…å®¹ -->
  <view wx:if="{{cartItems.length > 0}}" class="cart-content">
    <!-- å•†å“åˆ—è¡¨ -->
    <view class="cart-items">
      <view 
        wx:for="{{cartItems}}" 
        wx:key="id"
        class="cart-item"
      >
        <view class="item-checkbox" bindtap="onToggleSelect" data-id="{{item.id}}">
          <text class="checkbox {{item.selected ? 'checked' : ''}}">{{item.selected ? 'âœ“' : ''}}</text>
        </view>
        
        <image 
          class="item-image" 
          src="{{item.images && item.images[0] ? item.images[0].url : item.image}}"
          mode="aspectFill"
        />
        
        <view class="item-info">
          <text class="item-name">{{item.title || item.name}}</text>
          <text class="item-desc">{{item.brand}}, {{item.color && item.color[0] ? item.color[0] : ''}}</text>
          <view class="item-price">
            <text class="price-main">Â£{{item.rent_monthly_gbp || 8}}/mo</text>
            <text wx:if="{{item.purchase_price_gbp}}" class="price-old">Â£{{item.purchase_price_gbp}}</text>
          </view>
        </view>
        
        <view class="item-actions">
          <view class="quantity-controls">
            <view class="qty-btn" bindtap="onDecreaseQty" data-id="{{item.id}}">-</view>
            <text class="qty-value">{{item.quantity || 1}}</text>
            <view class="qty-btn" bindtap="onIncreaseQty" data-id="{{item.id}}">+</view>
          </view>
          <view class="remove-btn" bindtap="onRemoveItem" data-id="{{item.id}}">
            <text class="remove-icon">ğŸ—‘ï¸</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- åº•éƒ¨ç»“ç®—åŒºåŸŸ -->
    <view class="cart-footer">
      <view class="select-all">
        <view class="select-all-checkbox" bindtap="onToggleSelectAll">
          <text class="checkbox {{allSelected ? 'checked' : ''}}">{{allSelected ? 'âœ“' : ''}}</text>
        </view>
        <text class="select-all-text">å…¨é€‰</text>
      </view>
      
      <view class="total-section">
        <text class="total-label">åˆè®¡ï¼š</text>
        <text class="total-main">Â£{{totalAmount}}/mo</text>
      </view>
      
      <view class="checkout-btn {{selectedItems.length > 0 ? 'active' : ''}}" bindtap="onCheckout">
        <text class="checkout-text">ç»“ç®—({{selectedItems.length}})</text>
      </view>
    </view>
  </view>

  <!-- ç©ºè´­ç‰©è½¦çŠ¶æ€ -->
  <view wx:else class="empty-cart">
    <text class="empty-icon">ğŸ›’</text>
    <text class="empty-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</text>
    <text class="empty-desc">å¿«å»æ·»åŠ ä¸€äº›å–œæ¬¢çš„å®¶å…·å§</text>
    <view class="go-shopping-btn" bindtap="onGoShopping">
      <text class="go-shopping-text">å»é€›é€›</text>
    </view>
  </view>
</view>
